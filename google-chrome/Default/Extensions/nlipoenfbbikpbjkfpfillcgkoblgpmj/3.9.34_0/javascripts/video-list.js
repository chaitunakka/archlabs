function getList(t){return new Promise(function(e,i){$.ajax({type:"GET",url:"https://preview.diigo.com/api/v3/awe/upload/?user_id="+t,dataType:"json",success:function(t){e(t)},error:function(t,e){i([t,e])}})})}function initList(){DB.init().then(DB.getAll.bind(DB)).then(function(t){console.log(t),buildList(t)}),$("#delete-all").on("click",function(t){t.preventDefault(),confirm("Are you sure to delete all the recordings?")&&DB.deleteAll().then(updateList)})}function updateList(){DB.getAll().then(buildList)}function buildList(t){var e=$("#video-container");if(e.empty(),t.length){var i=$("#video-item-template").html();t.forEach(function(t){var n=t.detail,o=$(i);o.find("a").attr("href",chrome.extension.getURL("/video.html?id="+t.id)),o.find(".thumbnail-img").attr("src",n.thumbnailUrl),o.find(".title").text(n.title).attr("title",n.title),o.find(".duration").text(n.duration),o.find(".size").text(n.size),o.attr("data-id",t.id),o.find(".delete-icon").on("click",function(){confirm("Are you sure to delete this recording?")&&DB.delete(t.id).then(updateList)}),n.youtubeUrl&&o.addClass("shared_youtube"),n.gDriveUrl&&o.addClass("shared_gDrive"),o.appendTo(e)})}}var youtube_prefix="ba9b_",google_prefix="c822_";initList();