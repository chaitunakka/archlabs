var uploadVideo={YOUTUBE_BASE_URL:"https://www.googleapis.com/upload/youtube/v3/videos",INFO_URL:"https://preview.diigo.com/api/v3/awe/upload/?user_id=luokebi",getGoogleOauthToken:function(){return new Promise(function(e,o){chrome.identity.getAuthToken({interactive:!0},function(t){t?e(t):o()})})},uploadToYoutube:function(e,o){var t=this;return t._upload(e,t.YOUTUBE_BASE_URL,o)},uploadToGoogleDrive:function(e,o){return this._upload(e,null,o)},_upload:function(e,o,t){return this.getGoogleOauthToken().then(function(n){return new Promise(function(a,i){if(o)r={snippet:{title:e.name.replace(/\.webm$/,""),description:"Test"},status:{privacyStatus:"Unlisted"}};else var r={title:e.name.replace(/\.webm$/,""),shareable:!0,shared:!0};new MediaUploader({baseUrl:o,file:e,token:n,metadata:r,params:{part:Object.keys(r).join(",")},onError:function(e){console.log(e),i(e)},onProgress:function(e){var o=Date.now(),n=e.loaded,a=e.total,i=(this.uploadStartTime,100*n/a);t&&t(i)},onComplete:function(e){var o=JSON.parse(e);a(o)}}).upload()})})},uploadInfo:function(e){var o=this;return new Promise(function(t,n){$.ajax({type:"POST",url:o.INFO_URL,contentType:"application/json; charset=utf-8",data:JSON.stringify(e),success:function(e){console.log(e),t(e)},error:function(e,o){n(o)}})})}};