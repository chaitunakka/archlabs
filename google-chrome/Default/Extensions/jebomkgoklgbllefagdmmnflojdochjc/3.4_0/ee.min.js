(function(){function k(){for(var d=document.querySelectorAll("iframe"),b=0;b<d.length;++b)if(d[b]&&"html5Captcha"!=d[b].id&&!~d[b].src.indexOf("cashLessMessage.html")){var e=d[b].parentNode;if("nlpImgContainer"!=e.id){e.removeChild(d[b]);var c=document.createElement("p");c.innerHTML='Thank you for being a <b style="color:#34495E;font-size:18px">ZapTatkal</b> User.';c.style.margin="16px";c.style.fontStyle="italic";e.appendChild(c)}}}function p(d,b){var e=localStorage.getItem("bookingtime");chrome.runtime.sendMessage({transaction:{booked:b,
tcktstat:d,totalBookingTime:e}},function(){})}chrome.storage.local.get("irctcZapTatkalEnable",function(d){d&&(l=d.irctcZapTatkalEnable);void 0==l&&chrome.storage.local.set({irctcZapTatkalEnable:!0})});var l;k();var q=setInterval(k,10);window.addEventListener("load",function(){clearInterval(q);var d=localStorage.getItem("bookingtime")||0,d=d+String(((performance.timing.loadEventEnd-performance.timing.navigationStart)/1E3).toPrecision(3)).substring(0,4);localStorage.setItem("bookingtime",d);d=document.URL;
try{if(0<d.indexOf("eticketing/BankResponse")&&0==$("li:contains('Transaction Cancelled')").length&&0==$("li:contains('You can choose another payment option and try again.')").length&&0!==$("li:contains('Congratulations!')").length){p($($("td[id$=idt280]")[1]).html(),!0);var b=document.createElement("div");b.id="congratsPopup";b.style.cssText="box-sizing: border-box; z-index:999; position: absolute; top: 0; left: 0; bottom: 0; right: 0; margin: auto; width:500px;height: 300px; display: flex; flex-flow:column nowrap; background-color: white;box-shadow: 0 4px 5px 0 rgba(0, 0, 0, .14), 0 1px 10px 0 rgba(0, 0, 0, .12), 0 2px 4px -1px rgba(0, 0, 0, .2);padding: 20px;align-items: center";
var e=chrome.extension.getURL("/images/share/cong.jpg");b.style.backgroundImage="url("+e+")";b.style.backgroundRepeat="no-repeat";b.style.backgroundPosition="center 0";b.style.paddingTop="140px";var c=document.createElement("div");c.addEventListener("click",function(){b.parentNode.removeChild(b)});c.style.cssText="position:absolute; top: 10px; left: 10px; width: 35px ; height: 35px; cursor: pointer; border: 1px solid rgb(25, 143, 159);border-radius: 35px; background-size: 30px 30px";var a=chrome.extension.getURL("/images/share/close.png");
c.style.backgroundImage="url("+a+")";c.style.backgroundPosition="center";b.appendChild(c);var m=document.createElement("div");m.innerHTML="Your ticket is confirmed. Please take a moment to share about us.";b.appendChild(m);var f=document.createElement("div");f.id="shareButtonsContainer";f.style.marginTop="20px";b.appendChild(f);var g=document.createElement("a"),k=chrome.extension.getURL("/images/share/facebook.png");g.href="https://api.addthis.com/oexchange/0.8/forward/facebook/offer?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fzaptatkal%2Fjebomkgoklgbllefagdmmnflojdochjc&pubid=ra-5451115a70c19a2b&ct=1&title=ZapTatkal&pco=tbxnj-1.0";
g.target="_blank";g.innerHTML='<img src="'+k+'" border="0" alt="Facebook"/>';g.style.padding="3px";f.appendChild(g);var h=document.createElement("a"),r=chrome.extension.getURL("/images/share/twitter.png");h.href="https://api.addthis.com/oexchange/0.8/forward/twitter/offer?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fzaptatkal%2Fjebomkgoklgbllefagdmmnflojdochjc&pubid=ra-5451115a70c19a2b&ct=1&title=ZapTatkal&pco=tbxnj-1.0";h.target="_blank";h.innerHTML='<img src="'+r+'" border="0" alt="Twitter"/>';
h.style.padding="3px";f.appendChild(h);var i=document.createElement("a"),s=chrome.extension.getURL("/images/share/google_plusone_share.png");i.href="https://api.addthis.com/oexchange/0.8/forward/google_plusone_share/offer?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fzaptatkal%2Fjebomkgoklgbllefagdmmnflojdochjc&pubid=ra-5451115a70c19a2b&ct=1&title=ZapTatkal&pco=tbxnj-1.0";i.target="_blank";i.innerHTML='<img src="'+s+'" border="0" alt="Google+"/>';i.style.padding="3px";f.appendChild(i);
var j=document.createElement("a"),t=chrome.extension.getURL("/images/share/email.png");j.href="https://api.addthis.com/oexchange/0.8/forward/email/offer?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fzaptatkal%2Fjebomkgoklgbllefagdmmnflojdochjc&pubid=ra-5451115a70c19a2b&ct=1&title=ZapTatkal&pco=tbxnj-1.0";j.target="_blank";j.innerHTML='<img src="'+t+'" border="0" alt="Email"/>';j.style.padding="3px";f.appendChild(j);var n=document.createElement("div");n.id="cwsratebtn";b.appendChild(n);
var o=document.createElement("a");o.href="https://chrome.google.com/webstore/detail/zaptatkal/jebomkgoklgbllefagdmmnflojdochjc/reviews?hl=en";o.target="_blank";n.style.marginTop="20px";var u=chrome.extension.getURL("/images/share/cws_rating.png");o.innerHTML='<img src="'+u+'" border="0" alt="Chrome WebStore" style="height:55px"/>';n.appendChild(o);document.body.appendChild(b);chrome.runtime.sendMessage({message:{}},function(){})}else 0<$("td[id$=idt280]").length&&p($("td[id$=idt280]").html(),!1)}catch(v){}if(0>
document.URL.indexOf("printTicket")&&(e=document.getElementById("zptBanner"),!e)){e=document.createElement("div");e.id="zptBanner";e.style.cssText="height: 60px;width: 100%;position: fixed;z-index: 99; text-align: center;background: #34495E;";c=document.createElement("a");c.href="https://chrome.google.com/webstore/detail/zaptatkal/jebomkgoklgbllefagdmmnflojdochjc/reviews?hl=en";c.target="_blank";e.appendChild(c);a=document.createElement("img");m=chrome.extension.getURL("/images/logo.png");a.src=m;
a.style.cssText="position: absolute; left: 10px; top: 5px; height: 50px;";c.appendChild(a);c=document.createElement("div");c.style.cssText="position:absolute; right: 200px; top: 0; bottom:0; margin: auto 0; height: 30px; line-height: 30px; cursor: pointer";e.appendChild(c);a=document.createElement("input");a.type="checkbox";a.id="enablezt";a.checked=l;a.style.cssText="height: 16px; width: 20px; padding-right: 10px;cursor: pointer;transform:scale(1.2)";a.addEventListener("change",function(a){chrome.storage.local.set({irctcZapTatkalEnable:a.target.checked});
l=!0});c.appendChild(a);a=document.createElement("label");a.innerText="Enable ZapTatkal";a.style.cssText='color: white; font-size: 16px; font-family: "Roboto", "Helvetica", "Arial", sans-serif;cursor: pointer';a.setAttribute("for","enablezt");c.appendChild(a);if(c=e)a=document.createElement("div"),a.id="zaptime",a.style.fontSize="30px",a.style.color="#FFFFFF",a.style.marginBottom="5px",a.style.marginTop="10px",a.style.width="200px",a.style.height="40px",a.style.textAlign="center",a.style.cssFloat=
"right",c.appendChild(a),a.innerHTML=(new Date).toLocaleTimeString(),setInterval(function(){$("#zaptime").text((new Date).toLocaleTimeString())},1E3);document.body.parentNode.insertBefore(e,document.body);document.body.style.backgroundColor="#34495E";document.body.style.marginTop="65px"}})})();
