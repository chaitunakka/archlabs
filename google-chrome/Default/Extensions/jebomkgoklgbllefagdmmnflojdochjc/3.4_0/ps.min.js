(function(){function h(b){if(b&&a&&(b=b[e+c]))"NETBANKING"==b.paymentType?($("input[value="+b.paymentGateway+"]")&&$("input[value="+b.paymentGateway+"]").attr("checked","checked").change(),document.getElementById("NETBANKING").click()):"CREDIT_CARD"==b.paymentType?($("input[value="+b.paymentGateway+"]")&&$("input[value="+b.paymentGateway+"]").attr("checked","checked").change(),document.getElementById("CREDIT_CARD").click()):"DEBIT_CARD"==b.paymentType?($("input[value="+b.paymentGateway+"]")&&$("input[value="+
b.paymentGateway+"]").attr("checked","checked").change(),document.getElementById("DEBIT_CARD").click()):"CASH_CARD"==b.paymentType?($("input[value="+b.paymentGateway+"]")&&$("input[value="+b.paymentGateway+"]").attr("checked","checked").change(),document.getElementById("CASH_CARD").click()):"IRCTC_PREPAID"==b.paymentType&&($("input[value="+b.paymentGateway+"]")&&$("input[value="+b.paymentGateway+"]").attr("checked","checked").change(),document.getElementById("IRCTC_PREPAID").click()),"CREDIT_CARD"==
b.paymentType?17==b.paymentGateway||21==b.paymentGateway?chrome.storage.local.get(f+c,i):b.paymentGateway&&"-1"!=b.paymentGateway&&a&&(a.validate&&""!=a.validate.value)&&a.validate.click():b.paymentGateway&&"-1"!=b.paymentGateway&&a&&(a.validate&&""!=a.validate.value)&&a.validate.click(),window.scrollTo(0,document.body.scrollHeight),chrome.runtime.sendMessage({track:{event:"page viewed",eventData:{"page name":"IRCTC_PAYMENT",on:c&&-1!=c,url:window.location.pathname}}},function(){})}function i(b){if(b&&
(b=b[f+c]))if(a.card_type_id&&(a.card_type_id.value=b.type),a.card_no_id&&(a.card_no_id.value=b.number),a.card_expiry_mon_id&&(a.card_expiry_mon_id.value=b.expiryMonth),a.card_expiry_year_id&&(a.card_expiry_year_id.value=b.expiryYear),a.cvv_no_id&&(a.cvv_no_id.value=b.cvvNum),a.card_name_id&&(a.card_name_id.value=b.cardName),a.captcha_txt)a.captcha_txt.style.border="1px solid red",a.captcha_txt.focus(),setTimeout(j,300),a.validate&&a.validate.addEventListener("click",k),a.captcha_txt.addEventListener("blur",
function(){setTimeout(l,300)})}function k(){d=!0}function l(){d||a&&(a.validate&&""!=a.captcha_txt.value)&&a.validate.click();d=!1}function j(){var b=document.getElementById("cimage"),a=document.createElement("canvas"),c=a.getContext("2d");c.fillStyle="#fff";c.fillRect(0,0,a.width,a.height);c.drawImage(b,b.width,b.height);b=a.toDataURL();a=document.createElement("img");a.setAttribute("id","cimage_d");a.setAttribute("height","1px");a.setAttribute("width","1px");a.style.left="-100px";a.style.top="-100px";
a.src=b;document.body.appendChild(a);OCRAD(a,function(a){void 0!=a&&(a=a.toUpperCase(),a=a.replace(/[ \n\r\t]/g,""),a=a.replace(/\n/g,""),(5==a.length||6==a.length)&&$("input.loginCaptcha").val(a),$("input.loginCaptcha").focus(),a=document.getElementById("cimage_d"),document.body.removeChild(a))})}var a=document.forms.jpBook,c=void 0,e="paymentDetails_",f="cardDetails_",d=!1,g=!0;chrome.storage.local.get("irctcZapTatkalEnable",function(a){a&&(g=a.irctcZapTatkalEnable);g&&chrome.storage.local.get("selectedForm",
function(a){a&&(c=a.selectedForm,chrome.storage.local.get(e+c,h))})})})();
