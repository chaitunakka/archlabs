var ZAPTATKAL_FORMID="ztFormID_",PSG_ROW_PREFIX="psgRow_",PSG_NAME_PREFIX="psgName_",PSG_AGE_PREFIX="psgAge_",PSG_GENDER_PREFIX="psgGender_",PSG_BPREF_PREFIX="psgBerthPref_",PSG_MEAL_PREF_PREFIX="psgMealPref_",PSG_OPTBED_PREFIX="psgOB_",PSG_OPTBEDLABEL_PREFIX="psgOBLabel_",PSG_BEDROLL_PREFIX="psgBR_",PSG_BEDROLLLABEL_PREFIX="psgBRLabel_",PSG_ADDPSGROW_PREFIX="psgAddPsgRow_",PH_PSG_ROW_PREFIX="phpsgRow_",PH_PSG_NAME_PREFIX="phpsgName_",PSG_OPTCONCESSIONLABEL_PREFIX="psgOptConcessionLabel_",PSG_OPTCONCESSION_PREFIX=
"psgOptConcession_",PH_PSG_CONCESSION_PREFIX="phpsgConcession_",PH_PSG_DOB_PREFIX="phpsgDOB_",PH_PSG_VALIDUPTO_PREFIX="phpsgValidupto_",PH_PSG_CARDNO_PREFIX="phpsgCardNo_",PSG_IDCARDTYPE_PREFIX="psgIDCardType_",PSG_ID_CARDNO_PREFIX="psgIDCardNo_",formModules="welcomeScreen login journeyPlan passengerDetails passengerPHFormDetails payment".split(" "),paymentCategories=["NETBANKING","CREDIT_CARD","DEBIT_CARD","CASH_CARD","IRCTC_PREPAID"],paymentBankList=["inbList","ccbList","dcbList","ccbList","irctcprepaidbList"],
selectedFormID=void 0,selectedFormDetails=void 0,ztFormList=void 0,currentFormCount=0,DEFAULT_FORM_NAME="Form ",LOGIN_DETAILS="loginDetails_",JP_DETAILS="jpDetails_",TRAIN_DETAILS="trainDetails_",PAS_DETAILS="passengerDetails_",CHILD_PAS_DETAILS="childPassengerDetails_",PAYMENT_DETAILS="paymentDetails_",CARD_DETAILS="cardDetails_",ADDITIONAL_DETAILS="additionalDetails_",userID=void 0,showPHFormData=!1,sliderIndex=0,sliderTimerID=void 0,currentFormModuleIndex=-1,selectedPaymentMethod=-1,SAVE_FORM_EVT=
"saveForm",supportedPrefix,transitions={OTransition:{event:"otransitionend",transform:"OTransform",transition:"OTransition",origin:"OTransformOrigin",transformCSSStr:"-o-transform "},MozTransition:{event:"transitionend",transform:"MozTransform",transition:"MozTransition",origin:"MozTransformOrigin",transformCSSStr:"-moz-transform "},WebkitTransition:{event:"webkitTransitionEnd",transform:"webkitTransform",transition:"WebkitTransition",origin:"webkitTransformOrigin",transformCSSStr:"-webkit-transform "},
transition:{event:"transitionend",transform:"transform",transition:"transition",origin:"transformOrigin",transformCSSStr:"transform "}};initSupportedTransitionType();
function initProgressBar(){for(var a=1;6>a;++a){var b=document.getElementById("node"+a);b&&(b.classList.remove("select"),b.addEventListener("click",function(a){return function(){showFormModule(a);saveForm()}}(a)))}for(a=1;6>a;++a)if(b=document.getElementById("phnode"+a))b.classList.remove("select"),b.addEventListener("click",function(a){return function(){showFormModule(a);saveForm()}}(a))}
function autocompleteSource(a,b){for(var d=[],c=a.term.toLowerCase(),e=stationName.length,f=0;f<e;++f){var g=stationName[f].toLowerCase();(0==g.indexOf(c)||-1!=g.indexOf(" "+c))&&d.push(stationName[f])}b(d)}
function addEventListeners(){$("#fromStation").autocomplete({source:autocompleteSource});$("#toStation").autocomplete({source:autocompleteSource});$("#boardingStation").autocomplete({source:autocompleteSource});$("#ztDatePickerBtn").click(function(){$("#journeyDate").datepicker("show")});$("#journeyDate").datepicker({minDate:0,onSelect:function(){}});$("#journeyDate").datepicker("option","dateFormat","dd-mm-yy");document.getElementById("phConcessionInput").addEventListener("change",updatePassengerDetailsForm);
var a=document.getElementById("quota");a&&a.addEventListener("change",updatePassengerDetailsForm);$("#welcomeScreenIntrocontrols").on("click","span",function(){$("#welcomeScreenAboutSliderBlock div").removeClass("selected");sliderIndex=$(this).index();$("#welcomeScreenAboutSliderBlock div").eq(sliderIndex).addClass("selected");$("#welcomeScreenIntrocontrols span").removeClass("selected");$(this).addClass("selected");startWelcomeScreenSliderAnim()})}
function startWelcomeScreenSliderAnim(){sliderTimerID&&clearInterval(sliderTimerID);sliderTimerID=setInterval(function(){6===sliderIndex&&(sliderIndex=-1);$("#welcomeScreenIntrocontrols span:eq("+ ++sliderIndex+")").click()},3E3)}
function showFormModule(a){if(!(a>=formModules.length||0>a||currentFormModuleIndex===a)){var b=document.getElementById(formModules[a]),d;0<=currentFormModuleIndex&&(d=document.getElementById(formModules[currentFormModuleIndex]));var c=!1;a>currentFormModuleIndex&&(c=!0);b.classList.remove("right");b.classList.remove("left");b.classList.add("active");d&&(d.classList.remove("active"),c?(d.classList.add("left"),d.classList.remove("right")):(d.classList.add("right"),d.classList.remove("left")));0<a&&
((b=document.getElementById("node"+a))&&b.classList.add("active"),(b=document.getElementById("phnode"+a))&&b.classList.add("active"));0<currentFormModuleIndex&&((b=document.getElementById("node"+currentFormModuleIndex))&&b.classList.remove("active"),(b=document.getElementById("phnode"+currentFormModuleIndex))&&b.classList.remove("active"));b=document.getElementById("backBtn");d=document.getElementById("continueBtn");var c=document.getElementById("contBtnTextNode"),e=document.getElementById("newFormBtn"),
f=document.getElementById("welcomeScreenHeader"),g=document.getElementById("closeFormBtn");document.getElementById("formProgress");document.getElementById("phformProgress");currentFormModuleIndex=a;0===a?(b.style.display="none",d.style.display="none",e.style.display="block",showHideWelcomeScreenIntroBlock(),g.style.display="none"):(b.style.display=1==a?"none":"block",c.innerHTML=4===a?"Done":"Continue",d.style.display="block",e.style.display="none",f.style.display="none",g.style.display="block");
if(0===currentFormModuleIndex)for(a=1;a<formModules.length;++a)(b=document.getElementById(formModules[a]))&&b.classList.add("right");enableDisablePHPsgDetails()}}
function initFormModuleButtons(){document.getElementById("backBtn").addEventListener("click",function(){if(0!=currentFormModuleIndex){var a=currentFormModuleIndex-1;!showPHFormData&&5==currentFormModuleIndex&&(a=currentFormModuleIndex-2);showFormModule(a)}});document.getElementById("continueBtn").addEventListener("click",function(){if(currentFormModuleIndex===formModules.length-1)refreshFormList(),showFormModule(0);else{var a=currentFormModuleIndex+1;!showPHFormData&&3==currentFormModuleIndex&&(a=
currentFormModuleIndex+2);showFormModule(a)}saveForm()});document.getElementById("closeFormBtn").addEventListener("click",function(){areLoginDetailsSet()&&saveForm();refreshFormList();showFormModule(0)});document.getElementById("newFormBtn").addEventListener("click",function(){resetForm();showFormModule(1)});document.getElementById("logo").addEventListener("click",function(){areLoginDetailsSet()&&saveForm();refreshFormList();showFormModule(0)})}
function initShowHideChildPsgBtn(){document.getElementById("showHideChildPsgsBtn").addEventListener("click",function(a){var b=document.getElementById("childPsgDetailsTable"),a=a.currentTarget;b.classList.contains("active")?(b.classList.remove("active"),a.classList.remove("active")):(b.classList.add("active"),a.classList.add("active"))})}
function initPaymentMethods(){for(var a=0;a<paymentCategories.length;++a)document.getElementById("paymentBtn"+a).addEventListener("click",function(a){return function(){selectPaymentOption(a)}}(a));document.getElementById("ccbList").addEventListener("change",showHideCardDetails)}
function selectPaymentOption(a){a>=paymentCategories.length||(0>a||selectedPaymentMethod===a)||(document.getElementById(paymentCategories[a]).style.display="block",document.getElementById("paymentBtn"+a).classList.add("active"),0<=selectedPaymentMethod&&(document.getElementById(paymentCategories[selectedPaymentMethod]).style.display="none",document.getElementById("paymentBtn"+selectedPaymentMethod).classList.remove("active")),selectedPaymentMethod=a,showHideCardDetails())}
function showHideCardDetails(){var a=document.getElementById("cardDetails");if(1===selectedPaymentMethod){if(21==document.getElementById("ccbList").value){a.style.display="block";return}}else if(4===selectedPaymentMethod&&59==document.getElementById("irctcprepaidbList").value){a.style.display="block";return}a.style.display="none"}
function createAdultPsgDetailsForm(){for(var a=document.getElementById("psgDetailsTBody"),b=0;6>b;++b){var d=document.createElement("tr");d.id=PSG_ROW_PREFIX+b;a.appendChild(d);var c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.classList.add("psgNameCol");var e=createTextInput(PSG_NAME_PREFIX+b,"Name",16,16,!1);c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.classList.add("psgAgeCol");e=
createTextInput(PSG_AGE_PREFIX+b,"Age",3,3,!0);c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");e=document.createElement("select");e.id=PSG_GENDER_PREFIX+b;e.innerHTML='<option value=" ">Select</option>\n<option value="M">Male</option>\n<option value="F">Female</option>';e.size=1;c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");e=document.createElement("select");
e.size=1;e.id=PSG_BPREF_PREFIX+b;e.innerHTML='<option value="  " selected="selected">No Preference</option>\n<option value="LB">LOWER</option>\n<option value="MB">MIDDLE</option>\n<option value="UB">UPPER</option>\n<option value="SL">SIDE LOWER</option>\n<option value="SU">SIDE UPPER</option>';c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");e=document.createElement("select");e.size=1;e.id=PSG_MEAL_PREF_PREFIX+b;e.innerHTML='<option value=" " selected="selected">Select</option> <option value="N">NON VEG</option> <option value="V">VEG</option>';
c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.className="tdcb";c.appendChild(createCheckbox(PSG_OPTBEDLABEL_PREFIX+b,PSG_OPTBED_PREFIX+b));d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.className="tdcb";c.appendChild(createCheckbox(PSG_BEDROLLLABEL_PREFIX+b,PSG_BEDROLL_PREFIX+b));d.appendChild(c);if(3===b||4===b){c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");
e=document.createElement("button");e.className="addNewPassenger";e.classList.add("mdl-button");e.classList.add("mdl-js-button");e.id=PSG_ADDPSGROW_PREFIX+b;var f=document.createElement("i");f.classList.add("material-icons");f.innerText="add";e.appendChild(f);e.addEventListener("click",function(a){return function(b){b.currentTarget.style.display="none";b=document.getElementById(PSG_ROW_PREFIX+(a+1));b.style.display="table-row";b=document.getElementById(PH_PSG_ROW_PREFIX+(a+1));b.style.display="table-row"}}(b));
c.appendChild(e);d.appendChild(c)}if(4===b||5===b)d.style.display="none";resetAdultPassengerDetails(b)}}
function createPassengersPHFormData(){for(var a=document.getElementById("psgPHDetailsTBody"),b=0;6>b;++b){var d=document.createElement("tr");d.id=PH_PSG_ROW_PREFIX+b;a.appendChild(d);var c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.classList.add("psgNameCol");var e=createTextInput(PH_PSG_NAME_PREFIX+b,"",16,16,!1,!0);c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.className="tdcb";c.appendChild(createCheckbox(PSG_OPTCONCESSIONLABEL_PREFIX+
b,PSG_OPTCONCESSION_PREFIX+b));d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");e=document.createElement("select");e.id=PH_PSG_CONCESSION_PREFIX+b;e.innerHTML='<option value="" selected="selected">-Select-</option>\n<option value="1">Handicap</option>\n\t<option value="2">Escort</option>\n\t<option value="-1">General</option>\n\t<option value="3">Press Person</option>\n\t<option value="4">Press Spouse</option>\n\t<option value="5">Press Child</option>\n\t<option value="6">Press Companion</option>';
e.size=1;c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.classList.add("psgCardNumCol");e=createTextInput(PH_PSG_CARDNO_PREFIX+b,"",20,20,!1,!1);c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.classList.add("psgDateCol");e=createTextInput(PH_PSG_DOB_PREFIX+b,"",10,10,!1,!1);c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");
c.classList.add("psgDateCol");e=createTextInput(PH_PSG_VALIDUPTO_PREFIX+b,"",10,10,!1,!1);c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");e=document.createElement("select");e.id=PSG_IDCARDTYPE_PREFIX+b;e.innerHTML='<option value="NULL_IDCARD">ID Card Type</option>\n\t<option value="DRIVING_LICENSE">Driving Licence</option>\n\t<option value="PASSPORT">Passport/Travel document</option>\n\t<option value="PANCARD">PAN Card</option>\n\t<option value="VOTER_ICARD">Voter ID-card</option>\n\t<option value="GOVT_ICARD">Govt Issued ID-Card</option>\n\t<option value="STUDENT_ICARD">Student ID-Card</option>\n\t<option value="BANK_PASSBOOK">Bank Passbook</option>\n\t<option value="CREDIT_CARD">Credit card with Photo</option>\n\t<option value="UNIQUE_ICARD" selected="selected">Aadhaar ID</option>';
e.size=1;c.appendChild(e);d.appendChild(c);c=document.createElement("td");c.classList.add("mdl-data-table__cell--non-numeric");c.classList.add("psgCardNumCol");e=createTextInput(PSG_ID_CARDNO_PREFIX+b,"",16,16,!1,!1);c.appendChild(e);d.appendChild(c);if(4===b||5===b)d.style.display="none";resetPHAdultPassengerDetails(b)}}
function createCheckbox(a,b){var d=document.createElement("label");d.className="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect";d.id=a;d.setAttribute("for",b);var c=document.createElement("input");c.className="mdl-checkbox__input";c.id=b;c.type="checkbox";d.appendChild(c);c=document.createElement("label");c.setAttribute("for",b);d.appendChild(c);return d}
function createTextInput(a,b,d,c,e,f){b=document.createElement("div");b.className="mdl-textfield mdl-js-textfield";var g=document.createElement("input");g.className="mdl-textfield__input";g.type="text";g.setAttribute("spellCheck",!1);g.setAttribute("name",a);f&&g.setAttribute("disabled",!0);g.id=a;d&&g.setAttribute("size",d);c&&g.setAttribute("maxlength",c);e&&g.setAttribute("pattern","[0-9]*");b.appendChild(g);d=document.createElement("label");d.setAttribute("for",a);d.innerHTML="";d.className="mdl-textfield__label";
b.appendChild(d);return b}function initNavigationLinks(){document.getElementById("about_link").addEventListener("click",function(){showHideNavigationCards("about")});document.getElementById("closeAboutCard").addEventListener("click",showHideNavigationCards);document.getElementById("closeContactCard").addEventListener("click",showHideNavigationCards);document.getElementById("contact_link").addEventListener("click",function(){showHideNavigationCards("contact")})}
function initContactCard(){document.getElementById("sendFeedbackBtn").addEventListener("click",function(){var a=document.getElementById("name"),b=document.getElementById("email"),d=document.getElementById("message");chrome.runtime.sendMessage({track:{event:"feedback",eventData:{name:a.value,email:b.value,message:d.value}}},function(){});a.value="";b.value="";d.value=""})}
function showHideNavigationCards(a){var b=document.getElementById("contact");"contact"===a&&!b.classList.contains("active")?b.classList.add("active"):b.classList.remove("active");b=document.getElementById("about");"about"===a&&!b.classList.contains("active")?b.classList.add("active"):b.classList.remove("active")}function initializeFormsData(){chrome.storage.local.get("ztFormList",initializeCB)}function initializeCB(a){if(a&&(a=a.ztFormList))ztFormList=a,refreshFormList()}
function formDeleteCB(){}
function createFormThumb(a){var b=ztFormList[a];if(b){var d=document.createElement("div");d.classList.add("formThumb");d.classList.add("mdl-card");d.classList.add("mdl-shadow--2dp");var c=document.createElement("div");c.className="mdl-card__supporting-text";d.appendChild(c);var e=document.createElement("div");e.className="thumbNameDetails";c.appendChild(e);var f=document.createElement("div");f.className="thumbName";f.appendChild(document.createTextNode(b.formName));e.appendChild(f);f=document.createElement("button");
f.className="irctcLink mdl-button mdl-js-button transparentBtn mdl-js-ripple-effect";f.innerText="Book";f.addEventListener("click",function(b){b.stopPropagation();chrome.storage.local.set({selectedForm:a});chrome.storage.local.set({irctcZapTatkalEnable:!0});window.open("https://www.irctc.co.in","_blank")});e.appendChild(f);f=document.createElement("div");f.className="deleteForm";var g=document.createElement("button");g.className="mdl-button mdl-js-button transparentBtn mdl-js-ripple-effect";f.appendChild(g);
var h=document.createElement("i");h.className="material-icons";h.innerText="delete";g.appendChild(h);e.appendChild(f);g.addEventListener("click",function(b){b.stopPropagation();ztFormList&&ztFormList[a]&&(delete ztFormList[a],chrome.storage.local.set({ztFormList:ztFormList}),chrome.storage.local.remove(LOGIN_DETAILS+a,formDeleteCB),chrome.storage.local.remove(JP_DETAILS+a,formDeleteCB),chrome.storage.local.remove(TRAIN_DETAILS+a,formDeleteCB),chrome.storage.local.remove(PAS_DETAILS+a,formDeleteCB),
chrome.storage.local.remove(CHILD_PAS_DETAILS+a,formDeleteCB),chrome.storage.local.remove(PAYMENT_DETAILS+a,formDeleteCB),chrome.storage.local.remove(CARD_DETAILS+a,formDeleteCB),chrome.storage.local.remove(ADDITIONAL_DETAILS+a,formDeleteCB),chrome.storage.local.get("selectedForm",getSelectedFormCB),refreshFormList(),chrome.runtime.sendMessage({increment:{name:"formCount",by:-1}},function(){}))});e=document.createElement("div");e.className="thumbDetails";c.appendChild(e);c=document.createElement("div");
e.appendChild(c);f=document.createElement("span");f.innerHTML='<b>From:</b>&nbsp;&nbsp;<span class="formInfo">'+b.fromStation+"</span>";c.appendChild(f);f=document.createElement("span");f.innerHTML='<b>To:</b>&nbsp;&nbsp;<span class="formInfo">'+b.toStation+"</span>";c.appendChild(f);c=document.createElement("div");e.appendChild(c);e=document.createElement("span");e.innerHTML='<b>DoJ:</b>&nbsp;&nbsp;<span class="formInfo">'+b.doj+"</span>";c.appendChild(e);e=document.createElement("span");e.innerHTML=
'<b>Train Number:</b>&nbsp;&nbsp;<span class="formInfo">'+b.trainNumber+"</span>";c.appendChild(e);e=document.createElement("span");e.innerHTML='<b>Class:</b>&nbsp;&nbsp;<span class="formInfo">'+b.trainClass+"</span>";c.appendChild(e);d.addEventListener("click",function(){openForm(a)&&showFormModule(1)});return d}}
function getSelectedFormCB(a){if(a){a=a.selectedForm;if(a==selectedFormID){var a=-1,b;for(b in ztFormList)ztFormList.hasOwnProperty(b)&&(a=b);chrome.storage.local.set({selectedForm:a})}selectedFormDetails=selectedFormID=void 0}}function openForm(a){if(!a)return!1;selectedFormID=a;initializeFormDetails(selectedFormID);return!0}
function refreshFormList(){if(ztFormList){var a=0,b;for(b in ztFormList)ztFormList.hasOwnProperty(b)&&++a;currentFormCount=a;for(a=document.getElementById("welcomeScreenDataWrapper");a.lastChild;)a.removeChild(a.lastChild);for(b in ztFormList)if(ztFormList.hasOwnProperty(b)){var d=createFormThumb(b);d&&a.insertBefore(d,a.firstElementChild)}b=document.getElementById("newFormBtn");6<=currentFormCount?b.setAttribute("disabled",!0):b.removeAttribute("disabled");showHideWelcomeScreenIntroBlock()}}
function showHideWelcomeScreenIntroBlock(){var a=document.getElementById("welcomeScreenHeader"),b=document.getElementById("welcomeScreenIntroWrapper"),d=document.getElementById("welcomeScreenDataWrapper");sliderTimerID&&clearInterval(sliderTimerID);sliderTimerID=void 0;sliderIndex=-1;0==currentFormCount?(a.style.display="none",d.classList.add("inactive"),b.classList.remove("inactive"),startWelcomeScreenSliderAnim()):(b.classList.add("inactive"),d.classList.remove("inactive"),0===currentFormModuleIndex&&
(a.style.display="block"))}function initializeFormDetails(a){if(a||ztFormList)selectedFormID=a,selectedFormDetails={},selectedFormDetails.formID=selectedFormID,selectedFormDetails.formName=ztFormList[selectedFormID].formName||"",updateControls()}
function updateControls(){chrome.storage.local.get(LOGIN_DETAILS+selectedFormID,initializeLoginControls);chrome.storage.local.get(JP_DETAILS+selectedFormID,initializeJPControls);chrome.storage.local.get(TRAIN_DETAILS+selectedFormID,initializeTrainDetailControls);chrome.storage.local.get(PAS_DETAILS+selectedFormID,initializePassengerDetails);chrome.storage.local.get(CHILD_PAS_DETAILS+selectedFormID,initializeChildPassengerDetails);chrome.storage.local.get(PAYMENT_DETAILS+selectedFormID,initializePaymentDetails);
chrome.storage.local.get(CARD_DETAILS+selectedFormID,initializeCardDetails);chrome.storage.local.get(ADDITIONAL_DETAILS+selectedFormID,intializeAdditionalDetails)}function initializeLoginControls(a){if(a&&(a=a[LOGIN_DETAILS+selectedFormID]))document.getElementById("username").value=a.usernameId,document.getElementById("password").value=a.j_password,selectedFormDetails.loginDetails=a}
function initializeJPControls(a){if(a&&(a=a[[JP_DETAILS+selectedFormID]]))document.getElementById("fromStation").value=a.fromStation,document.getElementById("toStation").value=a.toStation,document.getElementById("boardingStation").value=a.boardingStation||a.fromStation,document.getElementById("journeyDate").value=a.doj,document.getElementById("ticketType").value=a.ticketType,document.getElementById("phConcessionInput").checked=a.phConcession||!1,document.getElementById("phConcessionInputLabel").MaterialCheckbox.checkToggleState(),
updatePassengerDetailsForm(),selectedFormDetails.jpDetails=a}function initializeTrainDetailControls(a){if(a&&(a=a[[TRAIN_DETAILS+selectedFormID]]))document.getElementById("quota").value=a.quota,document.getElementById("trainNumber").value=a.trainNumber,document.getElementById("class").value=a.trainClass,updatePassengerDetailsForm(),selectedFormDetails.trainDetails=a}
function initializePassengerDetails(a){if(a&&(a=a[PAS_DETAILS+selectedFormID])){for(var b=0;b<a.length&&6>b;++b){var d=document.getElementById(PSG_ROW_PREFIX+b),c=document.getElementById(PSG_ADDPSGROW_PREFIX+(b-1)),e=a[b];if(e){if(document.getElementById(PSG_NAME_PREFIX+b).value=e.name,document.getElementById(PSG_AGE_PREFIX+b).value=e.age,document.getElementById(PSG_GENDER_PREFIX+b).value=e.gender,document.getElementById(PSG_BPREF_PREFIX+b).value=e.berthChoice,document.getElementById(PSG_MEAL_PREF_PREFIX+
b).value=e.mealPref,document.getElementById(PSG_OPTBED_PREFIX+b).checked=e.childBerthOpt?"checked":!1,document.getElementById(PSG_OPTBEDLABEL_PREFIX+b).MaterialCheckbox.checkToggleState(),document.getElementById(PSG_BEDROLL_PREFIX+b).checked=e.bedRollChoice?"checked":!1,document.getElementById(PSG_BEDROLLLABEL_PREFIX+b).MaterialCheckbox.checkToggleState(),d&&(d.style.display="table-row"),c)c.style.display="none"}else if(3<b&&(d&&(d.style.display="none"),c))c.style.display="block"}selectedFormDetails.passengerDetailsList=
a;intializePassengerPHDetails(a)}}
function intializePassengerPHDetails(a){for(var b=0,d=0;d<a.length&&6>d;++d){var c=document.getElementById(PH_PSG_ROW_PREFIX+d),e=a[d];e?(++b,document.getElementById(PH_PSG_NAME_PREFIX+d).value=e.name||"",document.getElementById(PSG_OPTCONCESSION_PREFIX+d).checked=e.optConcession||!1,document.getElementById(PH_PSG_CONCESSION_PREFIX+d).value=e.concessionType||"",document.getElementById(PH_PSG_CARDNO_PREFIX+d).value=e.handicapCardNo||"",document.getElementById(PH_PSG_DOB_PREFIX+d).value=e.DoB||"",document.getElementById(PH_PSG_VALIDUPTO_PREFIX+
d).value=e.validUpto||"",document.getElementById(PSG_IDCARDTYPE_PREFIX+d).value=e.idCardType||"NULL_IDCARD",document.getElementById(PSG_ID_CARDNO_PREFIX+d).value=e.idCardNumber||"",c.style.display="table-row"):c&&(c.style.display="none")}for(;6>d;++d)c=document.getElementById(PH_PSG_ROW_PREFIX+d),c.style.display="none";a=document.getElementById("psgphtable");d=document.getElementById("phwarning");b?(a.style.display="table",d.style.display="none"):(a.style.display="none",d.style.display="block")}
function initializeChildPassengerDetails(a){if(a&&(a=a[CHILD_PAS_DETAILS+selectedFormID])){for(var b=0;b<a.length;++b){var d=a[b];document.getElementById("infantName"+b).value=d.infantName;document.getElementById("infantAge"+b).value=d.infantAge;document.getElementById("infantGender"+b).value=d.infantGender}selectedFormDetails.childPassengerDetailsList=a}}
function intializeAdditionalDetails(a){if(a&&(a=a[ADDITIONAL_DETAILS+selectedFormID]))document.getElementById("mobileNumber").value=a.mobileNumber||"",document.getElementById("autoUpgrade").checked=a.autoUpgrade||!1,document.getElementById("autoUpgradeLabel").MaterialCheckbox.checkToggleState(),document.getElementById("confirmBerths").checked=a.onlyConfirmBerths||!1,document.getElementById("confirmBerthsLabel").MaterialCheckbox.checkToggleState(),document.getElementById("needinsurance").checked=a.needinsurance||
!1,document.getElementById("needinsuranceLabel").MaterialCheckbox.checkToggleState(),selectedFormDetails.additionalDetails=a}function initializePaymentDetails(a){if(a)if(a=a[PAYMENT_DETAILS+selectedFormID],!a||!a.paymentType)resetPaymentDetails();else{var b=paymentCategories.indexOf(a.paymentType);document.getElementById(paymentBankList[b]).value=a.paymentGateway;selectPaymentOption(b);selectedPaymentMethod=b;selectedFormDetails.paymentDetails=a}}
function initializeCardDetails(a){if(a&&(a=a[CARD_DETAILS+selectedFormID]))document.getElementById("card_type_id").value=a.type,document.getElementById("card_no_id").value=refillSpacesForCardNumber(a.number),document.getElementById("card_expiry_mon_id").value=a.expiryMonth,document.getElementById("card_expiry_year_id").value=a.expiryYear,document.getElementById("cvv_no_id").value=a.cvvNum,document.getElementById("card_name_id").value=a.cardName,selectedFormDetails.cardDetails=a}
function updatePassengerDetailsForm(){var a=document.getElementById("phConcessionInput"),b=document.getElementById("quota");showPHFormData=a.checked||"HP"==b.value?!0:!1;enableDisablePHPsgDetails()}
function enableDisablePHPsgDetails(){var a=document.getElementById("formProgress"),b=document.getElementById("phformProgress");0<currentFormModuleIndex?showPHFormData?(a.style.display="none",b.style.display="block"):(a.style.display="block",b.style.display="none"):(a.style.display="none",b.style.display="none")}
function saveForm(){if(!(6<=currentFormCount)){if(void 0==selectedFormID){var a=++currentFormCount;chrome.runtime.sendMessage({increment:{name:"formCount",by:1}},function(){});if(ztFormList)for(var b=1;6>=b;++b)if(!ztFormList[ZAPTATKAL_FORMID+b]){a=b;break}if(!a)return;selectedFormID=ZAPTATKAL_FORMID+a;selectedFormDetails={};selectedFormDetails.formID=selectedFormID;a=DEFAULT_FORM_NAME+a}saveFormDetails();(b=ztFormList)||(b={});a=a||b[selectedFormID].formName;b[selectedFormID]={};b[selectedFormID].formName=
a;b[selectedFormID].fromStation=selectedFormDetails.jpDetails?selectedFormDetails.jpDetails.fromStation:"";b[selectedFormID].toStation=selectedFormDetails.jpDetails?selectedFormDetails.jpDetails.toStation:"";b[selectedFormID].doj=selectedFormDetails.jpDetails?selectedFormDetails.jpDetails.doj:"";b[selectedFormID].trainNumber=selectedFormDetails.trainDetails?selectedFormDetails.trainDetails.trainNumber:"";b[selectedFormID].trainClass=selectedFormDetails.trainDetails?selectedFormDetails.trainDetails.trainClass:
"";selectedFormDetails.formName=a;ztFormList=b;chrome.storage.local.set({ztFormList:b});chrome.storage.local.set({selectedForm:selectedFormID});chrome.runtime.sendMessage({track:{event:SAVE_FORM_EVT,eventData:{count:currentFormCount}}},function(){})}}function saveFormDetails(){saveLoginDetails();saveJourneyPlanDetails();savePassengerDetails();savePaymentDetails()}
function saveLoginDetails(){var a=document.getElementById("username"),b=document.getElementById("password"),a={usernameId:a.value,j_password:b.value};selectedFormDetails.loginDetails=a;b={};b[LOGIN_DETAILS+selectedFormID]=a;chrome.storage.local.set(b)}
function saveJourneyPlanDetails(){var a=document.getElementById("fromStation"),b=document.getElementById("toStation"),d=document.getElementById("boardingStation"),c=document.getElementById("journeyDate"),e=document.getElementById("ticketType"),f=document.getElementById("phConcessionInput"),b={fromStation:a.value,toStation:b.value,boardingStation:d.value,doj:c.value,ticketType:e.value,phConcession:f.checked};selectedFormDetails.jpDetails=b;a={};a[JP_DETAILS+selectedFormID]=b;chrome.storage.local.set(a);
a=document.getElementById("quota").value;b=document.getElementById("trainNumber").value;d=document.getElementById("class").value;b={quota:a,trainNumber:b,trainClass:d};selectedFormDetails.trainDetails=b;a={};a[TRAIN_DETAILS+selectedFormID]=b;chrome.storage.local.set(a)}
function savePassengerDetails(){var a=[],b;for(b=0;6>b;++b)if(isPsgRowDataSet(b)){var d=document.getElementById(PSG_NAME_PREFIX+b),c=document.getElementById(PSG_AGE_PREFIX+b),e=document.getElementById(PSG_GENDER_PREFIX+b),f=document.getElementById(PSG_BPREF_PREFIX+b),g=document.getElementById(PSG_MEAL_PREF_PREFIX+b),h=document.getElementById(PSG_OPTBED_PREFIX+b),l=document.getElementById(PSG_BEDROLL_PREFIX+b),m=document.getElementById(PSG_OPTCONCESSION_PREFIX+b),i=document.getElementById(PH_PSG_CONCESSION_PREFIX+
b),j=document.getElementById(PH_PSG_CARDNO_PREFIX+b),k=document.getElementById(PH_PSG_DOB_PREFIX+b),n=document.getElementById(PH_PSG_VALIDUPTO_PREFIX+b),o=document.getElementById(PSG_IDCARDTYPE_PREFIX+b),p=document.getElementById(PSG_ID_CARDNO_PREFIX+b),d={name:d.value||"",age:c.value||"",gender:e.value||" ",berthChoice:f.value||"  ",mealPref:g.value||" ",childBerthOpt:h.checked||!1,bedRollChoice:l.checked||!1,optConcession:m.checked||!1,idCardType:o.value,idCardNumber:p.value};showPHFormData?(d.concessionType=
i.value||"",d.handicapCardNo=j.value||"",d.DoB=k.value||"",d.validUpto=n.value||""):(d.concessionType="",d.handicapCardNo="",d.DoB="",d.validUpto="");a[a.length]=d}for(b=a.length;6>b;++b)a[b]=void 0;selectedFormDetails.passengerDetailsList=a;intializePassengerPHDetails(a);b={};b[PAS_DETAILS+selectedFormID]=a;chrome.storage.local.set(b);a=[];for(b=0;2>b;++b)i=document.getElementById("infantName"+b),j=document.getElementById("infantAge"+b),k=document.getElementById("infantGender"+b),a[a.length]={infantName:i.value,
infantAge:j.value,infantGender:k.value};selectedFormDetails.childPassengerDetailsList=a;b={};b[CHILD_PAS_DETAILS+selectedFormID]=a;chrome.storage.local.set(b);a={};a.mobileNumber=document.getElementById("mobileNumber").value;a.autoUpgrade=document.getElementById("autoUpgrade").checked;a.onlyConfirmBerths=document.getElementById("confirmBerths").checked;a.needinsurance=document.getElementById("needinsurance").checked;selectedFormDetails.additionalDetails=a;b={};b[ADDITIONAL_DETAILS+selectedFormID]=
a;chrome.storage.local.set(b)}
function savePaymentDetails(){var a=document.getElementById(paymentBankList[selectedPaymentMethod]).value,b={paymentType:paymentCategories[selectedPaymentMethod],paymentGateway:a};selectedFormDetails.paymentDetails=b;a={};a[PAYMENT_DETAILS+selectedFormID]=b;chrome.storage.local.set(a);var a=document.getElementById("card_type_id").value,b=document.getElementById("card_no_id").value,b=removeSpacesForCardNumber(b),d=document.getElementById("card_expiry_mon_id").value,c=document.getElementById("card_expiry_year_id").value,
e=document.getElementById("cvv_no_id").value,f=document.getElementById("card_name_id").value,b={type:a,number:b,expiryYear:c,expiryMonth:d,cvvNum:e,cardName:f};selectedFormDetails.cardDetails=b;a={};a[CARD_DETAILS+selectedFormID]=b;chrome.storage.local.set(a)}function resetForm(){resetLoginDetails();resetJourneyPlanDetails();resetTrainDetails();resetPassengerDetails();resetPaymentDetails();resetCardDetails();resetAdditionalDetails();selectedFormDetails=selectedFormID=void 0}
function resetFormName(){document.getElementById("formNameID").value=""}function resetLoginDetails(){document.getElementById("username").value="";document.getElementById("password").value=""}function resetJourneyPlanDetails(){document.getElementById("fromStation").value="";document.getElementById("toStation").value="";document.getElementById("boardingStation").value="";document.getElementById("journeyDate").value="";document.getElementById("ticketType").value="E_TICKET"}
function resetTrainDetails(){document.getElementById("quota").value="TQ";document.getElementById("trainNumber").value="";document.getElementById("class").value="SL"}
function resetAdultPassengerDetails(a){5<a||0>a||(document.getElementById(PSG_NAME_PREFIX+a).value="",document.getElementById(PSG_AGE_PREFIX+a).value="",document.getElementById(PSG_GENDER_PREFIX+a).value=" ",document.getElementById(PSG_BPREF_PREFIX+a).value="  ",document.getElementById(PSG_MEAL_PREF_PREFIX+a).value=" ",document.getElementById(PSG_OPTBED_PREFIX+a).checked=!1,document.getElementById(PSG_BEDROLL_PREFIX+a).checked=!1,document.getElementById(PSG_OPTBEDLABEL_PREFIX+a).MaterialCheckbox&&
document.getElementById(PSG_OPTBEDLABEL_PREFIX+a).MaterialCheckbox.checkToggleState(),document.getElementById(PSG_BEDROLLLABEL_PREFIX+a).MaterialCheckbox&&document.getElementById(PSG_BEDROLLLABEL_PREFIX+a).MaterialCheckbox.checkToggleState())}
function resetPHAdultPassengerDetails(a){5<a||0>a||(document.getElementById(PH_PSG_NAME_PREFIX+a).value="",document.getElementById(PSG_OPTCONCESSION_PREFIX+a).checked=!1,document.getElementById(PH_PSG_CARDNO_PREFIX+a).value="",document.getElementById(PH_PSG_DOB_PREFIX+a).value="",document.getElementById(PH_PSG_VALIDUPTO_PREFIX+a).value="",document.getElementById(PH_PSG_CONCESSION_PREFIX+a).value="",document.getElementById(PSG_IDCARDTYPE_PREFIX+a).value="NULL_IDCARD",document.getElementById(PSG_ID_CARDNO_PREFIX+
a).value="")}function resetChildPassengerDetails(a){1<a||0>a||(document.getElementById("infantName"+a).value="",document.getElementById("infantAge"+a).value=-1,document.getElementById("infantGender"+a).value=" ")}function resetPassengerDetails(){var a;for(a=0;6>a;++a)resetAdultPassengerDetails(a),resetPHAdultPassengerDetails(a);for(a=0;2>a;++a)resetChildPassengerDetails(a)}
function resetAdditionalDetails(){document.getElementById("mobileNumber").value="";document.getElementById("autoUpgrade").checked=!1;document.getElementById("autoUpgradeLabel").MaterialCheckbox.checkToggleState();document.getElementById("confirmBerths").checked=!1;document.getElementById("confirmBerthsLabel").MaterialCheckbox.checkToggleState();document.getElementById("needinsurance").checked=!1;document.getElementById("needinsuranceLabel").MaterialCheckbox.checkToggleState()}
function resetPaymentDetails(){selectPaymentOption(0);document.getElementById("inbList").value=-1;document.getElementById("dcbList").value=-1;document.getElementById("ccbList").value=-1;document.getElementById("cashcbList").value=-1;document.getElementById("ccbList").value=-1;document.getElementById("irctcprepaidbList").value=-1;showHideCardDetails()}
function resetCardDetails(){document.getElementById("card_type_id").value="";document.getElementById("card_no_id").value="";document.getElementById("card_expiry_mon_id").value="mm";document.getElementById("card_expiry_year_id").value="";document.getElementById("cvv_no_id").value="";document.getElementById("card_name_id").value=""}
function addValidationForNumberControls(){$(".only_numbers").keypress(validateForNumber);document.getElementById("card_no_id").addEventListener("input",fomatCreditCardNumber)}function validateForNumber(a){if(8==(a.which?a.which:a.keyCode))return!0;var b=void 0;if(window.event)b=a.keyCode;else if(a.which)b=a.which;else return!0;return/[0-9]/.test(String.fromCharCode(b))}
function areLoginDetailsSet(){var a=document.getElementById("username"),b=document.getElementById("password");if(a.value||b.value)return!0}
function isPsgRowDataSet(a){return""!=document.getElementById(PSG_NAME_PREFIX+a).value||""!=document.getElementById(PSG_AGE_PREFIX+a).value||" "!=document.getElementById(PSG_GENDER_PREFIX+a).value||"  "!=document.getElementById(PSG_BPREF_PREFIX+a).value||" "!=document.getElementById(PSG_MEAL_PREF_PREFIX+a).value||document.getElementById(PSG_OPTBED_PREFIX+a).checked||document.getElementById(PSG_BEDROLL_PREFIX+a).checked?!0:!1}
function initSupportedTransitionType(){supportedPrefix=transitions.transition;var a=document.body;if(a)for(var b in transitions)if(transitions.hasOwnProperty(b)&&void 0!==a.style[b]){supportedPrefix=transitions[b];break}}
function fomatCreditCardNumber(){var a=document.getElementById("card_no_id"),b=a.value,b=b.trim();5==b.length?b=b.substring(0,4)+" "+b.substring(4,5):10==b.length?b=b.substring(0,9)+" "+b.substring(9,10):15==b.length?b=b.substring(0,14)+" "+b.substring(14,15):20==b.length&&(b=b.substring(0,19)+" "+b.substring(19,20));a.value=b}
function swapToNFroStations(){var a=void 0,b=document.getElementById("fromStation"),d=document.getElementById("toStation"),c=document.getElementById("boardingStation"),a=b.value;b.value=d.value;d.value=a;c.value=b.value;setDirtyFlag()}function refillSpacesForCardNumber(a){if(a=a.trim())a=a.substring(0,4)+" "+a.substring(4),a=a.substring(0,9)+" "+a.substring(9),a=a.substring(0,14)+" "+a.substring(14);19<a.length&&(a=a.substring(0,19)+" "+a.substring(19));return a}
function removeSpacesForCardNumber(a){a=a.trim();return a=a.replace(/ /g,"")}function shareFormDetails(){}function init(){createAdultPsgDetailsForm();createPassengersPHFormData();initProgressBar();initFormModuleButtons();initShowHideChildPsgBtn();initPaymentMethods();showFormModule(0);selectPaymentOption(0);addEventListeners();addValidationForNumberControls();initializeFormsData();initNavigationLinks();initContactCard()}init();
chrome.runtime.sendMessage({track:{event:"page viewed",eventData:{"page name":"ZAPTATKAL",url:window.location.pathname}}},function(){});
