function initBoard(){$("#board").css({padding:borderWidth+"px"}),$("#save").on("click",function(){chrome.cookies.get({url:"https://www.awesomescreenshot.com",name:"screenshot_personal_type"},function(e){e?"1"==e.value?html2canvas($("#board")[0],{allowTaint:!0,onrendered:function(e){var t=e.toDataURL(),a=t.split(",")[1],n=t.split(",")[0].split(":")[1].split(";")[0],i=function(e,t,a){t=t||"",a=a||1024;for(var n=atob(e),i=[],o=0;o<n.length;o+=a){var r=n.slice(o,o+a),d=Array.prototype.map.call(r,function(e){return e.charCodeAt(0)}),s=new Uint8Array(d);i.push(s)}return new Blob(i,{type:t})}(a,n),o=(window.webkitURL||window.URL).createObjectURL(i),r=document.createElement("a"),d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),r.setAttribute("href",o);var s="AS_collage_"+Date.now();r.setAttribute("download",s+"."+n.split("/")[1]),r.dispatchEvent(d)}}):showPremium("w-aws-advanced"):showPremium("w-aws-advanced-login")})}),$(".board-item").on("click",function(){var e=$(this).get(0).outerHTML;$("#board").empty().html(e).find(".board-part").append('<input type="file"/>').append('<div title="Remove image" class="board-item-remove">x</div>')}),$(".number-area").find("div").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-tab");"0"==e?$(".board-item-container").show():($(".board-item-container").hide(),$(".board-item-container[data-index="+e+"]").show())}),$("#board").on("click",".board-item-remove",function(){$(this).parent().removeClass("added").find("img").remove(),$(this).parent().find("input").val("")}),$("#board").on("change","input",function(){var e=this.files[0];if(e){var t=URL.createObjectURL(e),a=document.createElement("img");a.onload=function(){},a.src=t;var n=$(this).parent();n.off("mousewheel").on("mousewheel",function(e){e.preventDefault();var t=e.originalEvent.wheelDelta/100,a=Math.exp(.1*t),n=$(this).find("img");n.css({width:n.width()*a,height:n.height()*a})}),$(a).appendTo(n).draggable(),n.addClass("added")}}),$("#board").on("dragover",".board-part",function(e){e.preventDefault(),e.stopPropagation()}),$("#board").on("dragenter",".board-part",function(e){console.log("dragenter"),$(this).addClass("dragover")}),$("#board").on("dragleave",".board-part",function(e){console.log("dragleave"),$(this).removeClass("dragover")}),$("#text-image").on("dragstart",function(e){e.originalEvent.dataTransfer.setData("imageUrl",this.src)}),$("#board").on("drop",".board-part",function(e){console.log("drop");var t=$(this);e.stopPropagation(),e.preventDefault(),console.log(e.originalEvent);var a=e.originalEvent,n=a.dataTransfer.files[0];if(n){var i=new FileReader;i.onload=function(e){var a=e.target.result,n=document.createElement("img");n.onload=function(){},n.src=a,$(n).appendTo(t).on("mousewheel",function(e){e.preventDefault();var t=e.originalEvent.wheelDelta/100,a=Math.exp(.2*t),n=$(this).find("img");n.css({width:n.width()*a,height:n.height()*a})}).draggable(),t.addClass("added")},i.readAsDataURL(n)}else if(a.dataTransfer.getData("imageUrl")){var o=document.createElement("img");o.onload=function(){},o.src=a.dataTransfer.getData("imageUrl"),$(o).appendTo(t).draggable(),t.addClass("added")}$(this).removeClass("dragover")}),$(".w-info").find(".w-close-btn").on("click",function(){1==$(".w-info").filter(function(){return $(this).is(":visible")}).length&&$("#w-wrapper").css({visibility:"hidden",opacity:0}),$(this).parent().hide(),"w-aws-create"==$(this).parent().attr("id")&&$("#c-p-input").val("")}),$(".w-info").find(".primary-btn").on("click",function(){$(".w-info").find(".w-close-btn").trigger("click")})}function showPremium(e){$("#w-wrapper").css({visibility:"visible",opacity:1}),$("#"+e).show()}function bindEvent(e){e.find("input").on("change",function(){var t=this.files[0];if(t){var a=URL.createObjectURL(t),n=document.createElement("img");n.onload=function(){},n.src=a,$(n).appendTo(e).draggable()}})}var borderWidth=10,defaultWidth=600,defaultHeight=600;initBoard(),$(".board-item-21").trigger("click");