(function(){function o(a){if(a){var b=a[k+e];if(b){if(a=document.forms.loginFormId){if(!b.usernameId)return;a.usernameId&&(a.usernameId.value=b.usernameId||"");if(!b.j_password){a.j_password.focus();return}a.j_password&&(a.j_password.value=b.j_password||"");if(a.j_captcha){a.j_captcha.style.border="1px solid red";a.j_captcha.focus();var b=document.getElementById("cimage"),d=document.createElement("canvas"),c=d.getContext("2d");c.fillStyle="#fff";c.fillRect(0,0,d.width,d.height);c.drawImage(b,b.width,
b.height);b=d.toDataURL();d=document.createElement("img");d.setAttribute("id","cimage_d");d.setAttribute("height","1px");d.setAttribute("width","1px");d.style.left="-100px";d.style.top="-100px";d.src=b;document.body.appendChild(d);OCRAD(d,function(a){if(a!=void 0){a=a.toUpperCase();a=a.replace(/[ \n\r\t]/g,"");(a.length==5||a.length==6)&&$("input.loginCaptcha").val(a);$("input.loginCaptcha").focus();a=document.getElementById("cimage_d");document.body.removeChild(a)}});a.loginbutton&&a.loginbutton.addEventListener("click",
p);a.j_captcha.addEventListener("blur",function(){setTimeout(l,300)})}}chrome.runtime.sendMessage({track:{event:"page viewed",eventData:{"page name":"IRCTC_LOGIN",on:e&&-1!=e,url:window.location.pathname}}},function(){})}}}function p(){f=!0}function l(){if(0!==g)h=!0;else if(f)f=!1;else{var a=b.j_captcha.value,b=document.forms.loginFormId;b&&(b.loginbutton&&5===a.length)&&b.loginbutton.click();h=f=!1}}var e=void 0,k="loginDetails_",f=!1,g=6,h=!1,m=document.getElementById("loginbutton");if(m){var i=
m.parentElement;if(i){var c=document.createElement("div");c.id="zaplogincounter";c.style.position="absolute";c.style.left="250px";c.style.fontSize="25px";c.style.color="#FF0000";c.style.marginBottom="5px";c.style.width="100px";c.style.height="80px";c.style.textAlign="center";i.appendChild(c);document.getElementById("zaplogincounter").innerHTML="click login after "+g--+" secs";var j=setInterval(function(){0<g?$("#zaplogincounter").text("click login after "+g--+" secs"):(j&&clearInterval(j),j=void 0,
i.removeChild(c),h&&l())},1E3)}}var n=!0;chrome.storage.local.get("irctcZapTatkalEnable",function(a){a&&(n=a.irctcZapTatkalEnable);n&&chrome.storage.local.get("selectedForm",function(a){if(a)(e=a.selectedForm)&&chrome.storage.local.get(k+e,o)})})})();
