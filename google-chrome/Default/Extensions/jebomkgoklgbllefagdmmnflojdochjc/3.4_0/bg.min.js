var userID;
chrome.runtime.onMessage.addListener(function(a){if(a.transaction){mixpanel.track("bookingInfo",{booked:a.transaction.booked,tcktstat:a.transaction.tcktstat,totalBookingTime:a.transaction.totalBookingTime,id:userID});var b=localStorage.getItem("history")||{minTime:9999,trData:[]};b.minTime=Math.min(b.minTime,a.transaction.totalBookingTime);b.trData.push(a.transaction);localStorage.setItem("history",b);chrome.storage.local.set({history:b})}else a.track?(a.track.eventData=a.track.eventData||{},a.track.eventData.id=
userID,mixpanel.track(a.track.event,a.track.eventData)):a.increment&&mixpanel.people.increment(a.increment.name,a.increment.value)});function guid(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()+"-"+(new Date).getTime()}function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}chrome.storage.local.get("history",function(a){localStorage.setItem("history",a.history)});chrome.runtime.onInstalled.addListener(function(){initUser()});
function deObfuscateToken(a){var b=a.length,d=[];d.length=b;var e=[];e.length=b;for(var c=0;c<b;++c)d[c]=c,e[c]=c;for(c=2;c<b;)c*=2;for(;1<c;c/=2){for(var f=0;f<b;++f)d[f]=e[f];for(f=0;f<b;f+=c){var g=f+c-1;g<b&&(e[f]=d[g],e[g]=d[f])}}d=[];for(c=0;c<b;++c)d[c]=a[e[c]];return d.join("")}
function initUser(){chrome.storage.local.get("userID",function(a){userID=a.userID||guid();mixpanel.identify(userID);mixpanel.people.set({id:userID,$created:(new Date).toISOString()});mixpanel.register({id:userID});mixpanel.track();a.userID||chrome.storage.local.set({userID:userID})})}window.MXP_CUSTOM_LIB_URL="external/mxp.js";
(function(a,b){if(!b.__SV){var d=window;try{var e,c,f,g=d.location,h=g.hash;e=function(a,b){return(c=a.match(RegExp(b+"=([^&]*)")))?c[1]:null};h&&e(h,"state")&&(f=JSON.parse(decodeURIComponent(e(h,"state"))),"mpeditor"===f.action&&(d.sessionStorage.setItem("_mpcehash",h),history.replaceState(f.desiredHash||"",a.title,g.pathname+g.search)))}catch(k){}var j,i;window.mixpanel=b;b._i=[];b.init=function(a,c,d){function f(a,b){var c=b.split(".");2==c.length&&(a=a[c[0]],b=c[1]);a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,
0)))}}var e=b;"undefined"!==typeof d?e=b[d]=[]:d="mixpanel";e.people=e.people||[];e.toString=function(a){var b="mixpanel";"mixpanel"!==d&&(b+="."+d);a||(b+=" (stub)");return b};e.people.toString=function(){return e.toString(1)+".people (stub)"};j="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(i=0;i<j.length;i++)f(e,j[i]);b._i.push([a,c,d])};b.__SV=1.2;d=a.createElement("script");d.type="text/javascript";d.async=!0;d.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===a.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=a.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)}})(document,window.mixpanel||[]);
var obfuscatedTokenValue="2e6f45abc72a549592fab6ef46ea0d5b";mixpanel.init(deObfuscateToken(obfuscatedTokenValue),{api_host:"https://api.mixpanel.com"});initUser();
