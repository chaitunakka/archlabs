!function(E){function _(A){if(T[A])return T[A].exports;var R=T[A]={i:A,l:!1,exports:{}};return E[A].call(R.exports,R,R.exports,_),R.l=!0,R.exports}var T={};_.m=E,_.c=T,_.i=function(E){return E},_.d=function(E,T,A){_.o(E,T)||Object.defineProperty(E,T,{configurable:!1,enumerable:!0,get:A})},_.n=function(E){var T=E&&E.__esModule?function(){return E.default}:function(){return E};return _.d(T,"a",T),T},_.o=function(E,_){return Object.prototype.hasOwnProperty.call(E,_)},_.p="",_(_.s=1485)}({1039:function(E,_,T){"use strict";var A=T(6),R=function(){function E(E,_){var T=[],A=!0,R=!1,O=void 0;try{for(var C,I=E[Symbol.iterator]();!(A=(C=I.next()).done)&&(T.push(C.value),!_||T.length!==_);A=!0);}catch(E){R=!0,O=E}finally{try{!A&&I.return&&I.return()}finally{if(R)throw O}}return T}return function(_,T){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return E(_,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=Object.assign||function(E){for(var _=1;_<arguments.length;_++){var T=arguments[_];for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(E[A]=T[A])}return E},C=function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};heap.track("Accessible Devices",E),window.top.postMessage(O({type:A.a.ACCESSIBLE_DEVICES},E),"*")},I=function(E){E&&E.getTracks().forEach(function(E){return E.stop()})},S=function(){var E={microphone:{permitted:!1,available:!1},camera:{permitted:!1,available:!1}};return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(_){return _.forEach(function(_){console.log(_);var T=_.kind,A=_.label;"audioinput"===T?E.microphone={available:!0,permitted:!!A}:"videoinput"===T&&(E.camera={available:!0,permitted:!!A})}),E}):Promise.reject(E)},N=function(E){return window.navigator.mediaDevices.getUserMedia(E).catch(function(_){return console.info("Failed requesting device "+JSON.stringify(E)+": "+_),Promise.resolve(null)})},D=function(E){if(E.data&&E.data.type===A.a.REQUEST_DEVICE_ACCESS){console.log("checking device permissions");var _=!!E.data.requestingMicrophone,T=!!E.data.requestingCamera;if(!_&&!T)return void console.log("No devices requested");S().then(function(E){if(E.microphone.permitted&&E.camera.permitted)return console.log("Already have permission to use camera and microphone"),E;console.log("Requesting access to microphone ("+_+") and camera ("+T+")");var A=[],O=_&&E.microphone.available,C=T&&E.camera.available;return O&&C?A.push(N({audio:!0,video:!0})):(O&&A.push(N({audio:!0})),C&&A.push(N({video:!0}))),Promise.all(A).then(function(E){var _=R(E,2),T=_[0],A=_[1];return I(T),I(A),{microphone:!!T,camera:!!A}})}).then(function(E){return C(E)}).catch(function(E){console.error("Failed requesting device permissions: "+E)})}},e=function(){window.addEventListener("message",D)};_.a=e},1485:function(E,_,T){E.exports=T(917)},6:function(E,_,T){"use strict";var A={EXTENSION_INSTALLED:"EXTENSION_INSTALLED",WINDOW_FOCUSED:"WINDOW_FOCUSED",TAB_ACTIVATED:"TAB_ACTIVATED",TAB_UPDATED:"TAB_UPDATED",TAB_REPLACED:"TAB_REPLACED",TAB_REMOVED:"TAB_REMOVED",POPUP_OPENED:"POPUP_OPENED",POPUP_INITIALIZED:"POPUP_INITIALIZED",POPUP_LOADING:"POPUP_LOADING",CONTENT_APP_REMOUNTED:"CONTENT_APP_REMOUNTED",SETUP_ORGANIZATION_ID_HEADER:"SETUP_ORGANIZATION_ID_HEADER",CREATE_TAB:"CREATE_TAB",SHOW_CAMERA_OVERLAY:"SHOW_CAMERA_OVERLAY",HIDE_CAMERA_OVERLAY:"HIDE_CAMERA_OVERLAY",SHOW_COUNTDOWN_OVERLAY:"SHOW_COUNTDOWN_OVERLAY",HIDE_COUNTDOWN_OVERLAY:"HIDE_COUNTDOWN_OVERLAY",SHOW_CAMERA_ONLY_OVERLAY:"SHOW_CAMERA_ONLY_OVERLAY",HIDE_CAMERA_ONLY_OVERLAY:"HIDE_CAMERA_ONLY_OVERLAY",SHOW_TIMER_OVERLAY:"SHOW_TIMER_OVERLAY",HIDE_TIMER_OVERLAY:"HIDE_TIMER_OVERLAY",SET_TARGET_TAB:"SET_TARGET_TAB",AUTHENTICATE:"AUTHENTICATE",AUTHENTICATION_SUCCESS:"AUTHENTICATION_SUCCESS",CLEAR_AUTH_STATE:"CLEAR_AUTH_STATE",UNAUTHENTICATE:"UNAUTHENTICATE",RELOADAPP:"RELOADAPP",AUTHENTICATION_RESPONSE:"AUTHENTICATION_RESPONSE",FETCH_PLAYER:"FETCH_PLAYER",FETCH_PLAYER_SUCCESS:"FETCH_PLAYER_SUCCESS",FETCH_PLAYER_ERROR:"FETCH_PLAYER_ERROR",FETCH_PLAYER_COOKIES:"FETCH_PLAYER_COOKIES",FETCH_PLAYER_COOKIES_SUCCESS:"FETCH_PLAYER_COOKIES_SUCCESS",FETCH_PLAYER_COOKIES_ERROR:"FETCH_PLAYER_COOKIES_ERROR",FETCH_EAGERLY_RECENTLY_VIEWED_PLAYERS:"FETCH_EAGERLY_RECENTLY_VIEWED_PLAYERS",FETCH_LATEST_RECENTLY_VIEWED_PLAYERS:"FETCH_LATEST_RECENTLY_VIEWED_PLAYERS",FETCH_MORE_RECENTLY_VIEWED_PLAYERS:"FETCH_MORE_RECENTLY_VIEWED_PLAYERS",FETCH_RECENTLY_VIEWED_PLAYERS_SUCCESS:"FETCH_RECENTLY_VIEWED_PLAYERS_SUCCESS",FETCH_RECENTLY_VIEWED_PLAYERS_ERROR:"FETCH_RECENTLY_VIEWED_PLAYERS_ERROR",CLEAR_STREAM_NEW_MESSAGES:"CLEAR_STREAM_NEW_MESSAGES",FETCH_STREAM:"FETCH_STREAM",FETCHING_STREAM:"FETCHING_STREAM",FETCH_STREAM_COMPLETE:"FETCH_STREAM_COMPLETE",FETCH_BADGE_NEW_COUNT:"FETCH_BADGE_NEW_COUNT",UPDATE_BADGE_NEW_COUNT:"UPDATE_BADGE_NEW_COUNT",ADD_ACTIVITIES:"ADD_ACTIVITIES",ADD_ACTIVITY:"ADD_ACTIVITY",UPDATE_UNSEEN_COUNT:"UPDATE_UNSEEN_COUNT",SETUP_FEED:"SETUP_FEED",FETCH_LIBRARY:"FETCH_LIBRARY",FETCHING_LIBRARY:"FETCHING_LIBRARY",FETCH_LIBRARY_COMPLETE:"FETCH_LIBRARY_COMPLETE",FETCH_LIBRARY_ERROR:"FETCH_LIBRARY_ERROR",LIBRARY_SHOW_DELETE_PROMPT:"LIBRARY_SHOW_DELETE_PROMPT",LIBRARY_CANCEL_DELETE:"LIBRARY_CANCEL_DELETE",LIBRARY_PROCESS_DELETE:"LIBRARY_PROCESS_DELETE",LIBRARY_DELETE_COMPLETED:"LIBRARY_DELETE_COMPLETED",LIBRARY_DELETE_SKIPPED:"LIBRARY_DELETE_SKIPPED",ORGANIZATION_SUBSCRIPTION_CREATE:"ORGANIZATION_SUBSCRIPTION_CREATE",REQUEST_DEVICE_ACCESS:"REQUEST_DEVICE_ACCESS",ACCESSIBLE_DEVICES:"ACCESSIBLE_DEVICES",POLL_DEVICES:"POLL_DEVICES",SET_AUDIO_DETECTED:"SET_AUDIO_DETECTED",ENABLE_MICROPHONE:"ENABLE_MICROPHONE",DISABLE_MICROPHONE:"DISABLE_MICROPHONE",ENABLE_CAMERA:"ENABLE_CAMERA",DISABLE_CAMERA:"DISABLE_CAMERA",CHANGE_SOURCE:"CHANGE_SOURCE",CHANGE_CAMERA_DEVICE:"CHANGE_CAMERA_DEVICE",UPLOAD_ERROR:"UPLOAD_ERROR",START_UPLOADER_PROCESSING:"START_UPLOADER_PROCESSING",STOP_UPLOADER_PROCESSING:"STOP_UPLOADER_PROCESSING",STARTED_UPLOAD_PART:"STARTED_UPLOAD_PART",FINISHED_UPLOAD_PART:"FINISHED_UPLOAD_PART",CLEAR_VIDEO_UPLOAD:"CLEAR_VIDEO_UPLOAD",DISCARD_VIDEO_UPLOAD:"DISCARD_VIDEO_UPLOAD",RECOVER_VIDEO_UPLOAD:"RECOVER_VIDEO_UPLOAD",HAS_RECORDING:"HAS_RECORDING",UPDATE_TIMER:"UPDATE_TIMER",SET_TIMER:"SET_TIMER",INITIALIZE_RECORDING:"INITIALIZE_RECORDING",CANCEL_RECORDING:"CANCEL_RECORDING",RESTART_RECORDING:"RESTART_RECORDING",START_RECORDING:"START_RECORDING",RECORDING_STARTED:"RECORDING_STARTED",STOP_RECORDING:"STOP_RECORDING",RECORDING_STOPPED:"RECORDING_STOPPED",ABORT_RECORDING:"ABORT_RECORDING",TOGGLE_DISCARD_RECORDING:"TOGGLE_DISCARD_RECORDING",INITIATE_STOP_RECORDING:"INITIATE_STOP_RECORDING",TOGGLE_PAUSE_RECORDING:"TOGGLE_PAUSE_RECORDING",UPDATE_PAUSE_STATUS:"UPDATE_PAUSE_STATUS",UPDATE_DISCARD_STATE:"UPDATE_DISCARD_STATE",HOTKEY_COMMAND:"HOTKEY_COMMAND",SET_CAMERA_DEVICES:"SET_CAMERA_DEVICES",START_COUNTDOWN:"START_COUNTDOWN",COUNTDOWN_STARTED:"COUNTDOWN_STARTED",COMPLETE_COUNTDOWN:"COMPLETE_COUNTDOWN",ABORT_COUNTDOWN:"ABORT_COUNTDOWN",TICK_COUNTDOWN:"TICK_COUNTDOWN",PAUSE_COUNTDOWN:"PAUSE_COUNTDOWN",RESUME_COUNTDOWN:"RESUME_COUNTDOWN",RESET_COUNTDOWN:"RESET_COUNTDOWN",DISPLAY_PERMISSIONS_ERROR:"DISPLAY_PERMISSIONS_ERROR",HIDE_PERMISSIONS_ERROR:"HIDE_PERMISSIONS_ERROR",GET_PLAYER_DETAILS:"GET_PLAYER_DETAILS",GET_PLAYER_BRANDED_SHARING_PAGE:"GET_PLAYER_BRANDED_SHARING_PAGE",SET_PLAYER_NAME:"SET_PLAYER_NAME",GET_VIDEOS:"GET_VIDEOS",CREATE_PLAYER:"CREATE_PLAYER",DELETE_PLAYER_AND_VIDEO:"DELETE_PLAYER_AND_VIDEO",COPY_SHARING_URL_TO_CLIPBOARD:"COPY_SHARING_URL_TO_CLIPBOARD",OPEN_SHARING_URL:"OPEN_SHARING_URL",GET_YOUTUBE_TOKENS:"GET_YOUTUBE_TOKENS",DISCONNECT_YOUTUBE:"DISCONNECT_YOUTUBE",GET_FEATURES:"GET_FEATURES",RESET_FEATURES:"RESET_FEATURES",GET_VIDEO_THUMBNAILS:"GET_VIDEO_THUMBNAILS",SET_PLAYER_THUMBNAIL:"SET_PLAYER_THUMBNAIL",DISPLAY_NOTIFICATION:"DISPLAY_NOTIFICATION",TRACK_EVENT:"TRACK_EVENT",GET_ORGANIZATIONS:"GET_ORGANIZATIONS",LOAD_USER_OPTIONS:"LOAD_USER_OPTIONS",CHANGE_SHOW_TIMER_OPTION:"CHANGE_SHOW_TIMER_OPTION",CHANGE_DISABLE_CHAT_WIDGETS_OPTION:"CHANGE_DISABLE_CHAT_WIDGETS_OPTION",CHANGE_SHOW_FEED_NOTIFICATIONS_OPTION:"CHANGE_SHOW_FEED_NOTIFICATIONS_OPTION",DISABLE_YOUTUBE_BUTTON:"DISABLE_YOUTUBE_BUTTON",CHECK_INTERNET_CONNECTION:"CHECK_INTERNET_CONNECTION",INTERNET_CONNECTION_STATUS:"INTERNET_CONNECTION_STATUS",SET_INTERNET_CONNECTION_TYPE:"SET_INTERNET_CONNECTION_TYPE",RESTART_CHROME:"RESTART_CHROME",UPDATE_CHROME:"UPDATE_CHROME",SET_ACCOUNT_LOCK_STATUS:"SET_ACCOUNT_LOCK_STATUS",SET_BLOCKBUSTER_CALLBACK:"SET_BLOCKBUSTER_CALLBACK",CLEAR_BLOCKBUSTER_CALLBACK:"CLEAR_BLOCKBUSTER_CALLBACK",SEND_MESSAGE_TO_EBERT:"SEND_MESSAGE_TO_EBERT",INJECT_EBERT_CONTENT_SCRIPT:"INJECT_EBERT_CONTENT_SCRIPT"};_.a=A},917:function(E,_,T){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var A=T(1039);T.i(A.a)()}});
//# sourceMappingURL=requestDeviceAccess.min.js.map