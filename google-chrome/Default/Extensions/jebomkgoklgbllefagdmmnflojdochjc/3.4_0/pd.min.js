(function(){function o(e){if(e&&(e=e[i+g])&&a){var f=0<e.boardingStation.length?e.boardingStation.substring(e.boardingStation.indexOf(" - ")+3).trim():"";0==f.length&&(f=0<e.fromStation.length?e.fromStation.substring(e.fromStation.indexOf(" - ")+3).trim():"");a["addPassengerForm:boardingStation"]&&$("select[name='addPassengerForm:boardingStation'] option").each(function(){$(this).val().toLowerCase()==f.toLowerCase()&&(a["addPassengerForm:boardingStation"].value=f)});chrome.runtime.sendMessage({track:{event:"page viewed",
eventData:{"page name":"IRCTC_PSG",on:g&&-1!=g,url:window.location.pathname}}},function(){})}}function p(e){if(a&&(e=e[j+g])){var f=document.createEvent("HTMLEvents");f.initEvent("change",!1,!0);for(var k=!0,h,c=0;c<e.length;++c){var d=e[c];if(d){if(0==c&&(!d.name||!d.age||!d.gender))k=!1;var b=$('tr[id="addPassengerForm:psdetail:'+c+'"]');a["addPassengerForm:psdetail:"+c+":psgnName"]?a["addPassengerForm:psdetail:"+c+":psgnName"].value=d.age||"":0<$(b).find("input.psgn-name").length&&$(b).find("input.psgn-name").val(d.name||
"");a["addPassengerForm:psdetail:"+c+":psgnAge"]?(a["addPassengerForm:psdetail:"+c+":psgnAge"].value=d.age||"",$("#addPassengerForm\\:psdetail\\:"+c+"\\:psgnAge").trigger("change")):0<$(b).find("input.psgn-age").length&&($(b).find("input.psgn-age").val(d.age||""),$(b).find("input.psgn-age")[0].dispatchEvent(f));a["addPassengerForm:psdetail:"+c+":psgnGender"]?(a["addPassengerForm:psdetail:"+c+":psgnGender"].value=d.gender,$("#addPassengerForm\\:psdetail\\:"+c+"\\:psgnGender").trigger("change")):0<
$(b).find("select.psgn-gender").length&&($(b).find("select.psgn-gender").val(d.gender),$(b).find("select.psgn-gender")[0].trigger("change"));a["addPassengerForm:psdetail:"+c+":foodChoice"]?a["addPassengerForm:psdetail:"+c+":foodChoice"].value=d.mealPref:0<$("select[name='addPassengerForm:psdetail:"+c+":foodChoice']").length&&$("select[name='addPassengerForm:psdetail:"+c+":foodChoice']").val(d.mealPref);a["addPassengerForm:psdetail:"+c+":berthChoice"]?a["addPassengerForm:psdetail:"+c+":berthChoice"].value=
d.berthChoice:0<$(b).find("select.psgn-berth-choice").length&&$(b).find("select.psgn-berth-choice").val(d.berthChoice);a["addPassengerForm:psdetail:"+c+":childBerthOpt"]?(a["addPassengerForm:psdetail:"+c+":childBerthOpt"].checked=d.childBerthOpt?"checked":!1,$("#addPassengerForm\\:psdetail\\:"+c+"\\:childBerthOpt").trigger("change")):0<$(b).find("select.psgn-chilldBerth").length&&($(b).find("select.psgn-chilldBerth").val(d.childBerthOpt),$(b).find("select.psgn-chilldBerth")[0].trigger("change"));
a["addPassengerForm:psdetail:"+c+":bedRollOpt"]?a["addPassengerForm:psdetail:"+c+":bedRollOpt"].checked=d.bedRollChoice?"checked":!1:0<$(b).find("select.psgn-bedRollChoice").length&&$(b).find("select.psgn-bedRollChoice").val(d.bedRollChoice);a["addPassengerForm:psdetail:"+c+":concessionOpt"]?a["addPassengerForm:psdetail:"+c+":concessionOpt"].checked=d.optConcession?"checked":!1:0<$(b).find("select.psgn-concopt").length&&$(b).find("select.psgn-concopt").val(d.optConcession);0<$(b).find("select.psgn-disablePsgnType").length&&
($(b).find("select.psgn-disablePsgnType").val(d.concessionType),$(b).find("select.psgn-disablePsgnType")[0].dispatchEvent(f));0<$(b).find("input.psgn-disableCardId").length&&($(b).find("input.psgn-disableCardId").val(d.handicapCardNo||""),$(b).find("input.psgn-disableCardId")[0].dispatchEvent(f));0<$(b).find("input.psgn-disablePsgnDob").length&&($(b).find("input.psgn-disablePsgnDob").val(d.DoB||""),$(b).find("input.psgn-disablePsgnDob")[0].dispatchEvent(f));0<$(b).find("input.psgn-disableCardExpDt").length&&
($(b).find("input.psgn-disableCardExpDt").val(d.validUpto||""),$(b).find("input.psgn-disableCardExpDt")[0].dispatchEvent(f));d.idCardNumber&&d.idCardType&&((0<$(b).find("select.psgn-idcardtype").length?($(b).find("select.psgn-idcardtype").val(d.idCardType),$(b).find("select.psgn-idcardtype")[0].dispatchEvent(f)):a["addPassengerForm:psdetail:"+c+":idCardType"]&&(a["addPassengerForm:psdetail:"+c+":idCardType"].value=d.idCardType),0<$(b).find("input.psgn-idcardnumber").length)?($(b).find("input.psgn-idcardnumber").val(d.idCardNumber||
""),$(b).find("input.psgn-idcardnumber")[0].dispatchEvent(f)):a["addPassengerForm:psdetail:"+c+":idCardNumber"]&&(a["addPassengerForm:psdetail:"+c+":idCardNumber"].value=d.idCardNumber));h=!0}}setTimeout(function(){var b=document.getElementById("nlpAnswer")||a.j_captcha;b&&(k&&h)&&(b.style.border="1px solid red",b.focus(),b.addEventListener("blur",function(){setTimeout(q,300)}),a.validate&&a.validate.addEventListener("click",r))},1E3)}}function r(){h=!0}function q(){if(!h){var e=document.getElementById("nlpAnswer")||
a.j_captcha;a&&(a.validate&&""!=e.value)&&a.validate.click()}h=!1}function s(e){if(a&&(e=e[l+g]))for(var f=0;f<e.length;++f){var h=e[f];a["addPassengerForm:childInfoTable:"+f+":infantName"]&&(a["addPassengerForm:childInfoTable:"+f+":infantName"].value=h.infantName||"");a["addPassengerForm:childInfoTable:"+f+":infantAge"]&&(a["addPassengerForm:childInfoTable:"+f+":infantAge"].value=h.infantAge);a["addPassengerForm:childInfoTable:"+f+":infantGender"]&&(a["addPassengerForm:childInfoTable:"+f+":infantGender"].value=
h.infantGender)}}function t(e){if(a&&(e=e[m+g]))if(a["addPassengerForm:mobileNo"]&&(a["addPassengerForm:mobileNo"].value=e.mobileNumber),a["addPassengerForm:autoUpgrade"]&&(a["addPassengerForm:autoUpgrade"].checked=e.autoUpgrade),a["addPassengerForm:onlyConfirmBerths"]&&(a["addPassengerForm:onlyConfirmBerths"].checked=e.onlyConfirmBerths),a["addPassengerForm:travelInsurance"])a["addPassengerForm:travelInsurance:0"].checked=!0}var a=document.forms.addPassengerForm,g=void 0,j="passengerDetails_",l=
"childPassengerDetails_",m="additionalDetails_",i="jpDetails_",h=!1,n=!0;chrome.storage.local.get("irctcZapTatkalEnable",function(a){a&&(n=a.irctcZapTatkalEnable);n&&chrome.storage.local.get("selectedForm",function(a){a&&(g=a.selectedForm,chrome.storage.local.get(j+g,p),chrome.storage.local.get(i+g,o),chrome.storage.local.get(l+g,s),chrome.storage.local.get(m+g,t))})})})();
